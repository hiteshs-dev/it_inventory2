<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ITM University | Cloud Inventory System</title>

  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- ================= LOGIN MODAL ================= -->
<div id="loginModal">
  <div class="login-box">
    <img src="image/ISU-LOGO.webp"
         onerror="this.src='https://via.placeholder.com/80?text=ITM'"
         style="height:80px; margin-bottom:1rem; opacity:0.8;">
    <h2 style="color:var(--primary); margin-bottom:1rem;">ITM SYSTEM</h2>

    <form id="loginForm">
      <input type="text" id="username" placeholder="Username" required />
      <input type="password" id="password" placeholder="Password" required />
      <button class="btn-submit" type="submit">Login</button>
    </form>

    <p id="loginError" style="color:#ff3366; display:none; margin-top:10px;">
      Invalid Credentials
    </p>
  </div>
</div>

<!-- ================= HEADER ================= -->
<header>
  <div class="brand">
    <img src="image/ISU-LOGO.webp"
         onerror="this.src='https://via.placeholder.com/50?text=ITM'"
         style="height:50px;">
    <span>ITM Inventory</span>
  </div>

  <nav class="nav-tabs" id="navTabs" style="display:none;">
    <button class="nav-btn active" onclick="switchPage('entry')">Data Entry</button>
    <button class="nav-btn" onclick="switchPage('dashboard')">Dashboard</button>
    <button class="nav-btn" onclick="logout()">Logout</button>
  </nav>
</header>

<!-- ================= MAIN ================= -->
<main id="mainApp">

<!-- ================= DATA ENTRY PAGE ================= -->
<div id="page-entry" class="page active">
  <div class="entry-grid">

    <!-- FORM -->
    <section class="card">
      <h2>Add / Edit Entry</h2>

      <form id="assetForm">

        <!-- ROLE / TITLE -->
        <div class="form-row">
          <div class="form-group">
            <label>Role</label>
            <select id="role" onchange="toggleFields()" required>
              <option value="student">Student</option>
              <option value="employee">Employee</option>
            </select>
          </div>

          <div class="form-group">
            <label>Title</label>
            <select id="title">
              <option>Mr.</option>
              <option>Ms.</option>
              <option>Dr.</option>
              <option>Prof.</option>
            </select>
          </div>
        </div>

        <!-- NAME / EMAIL -->
        <div class="form-row">
          <div class="form-group">
            <label>Full Name</label>
            <input id="name" required />
          </div>

          <div class="form-group">
            <label>Email</label>
            <input id="email" type="email" />
          </div>
        </div>

        <!-- STUDENT -->
        <div id="studentFields">
          <div class="form-row">
            <div class="form-group">
              <label>Batch</label>
              <select id="batch">
                <option value="2027">2027</option>
                <option value="2026">2026</option>
                <option value="2025">2025</option>
              </select>
            </div>

            <div class="form-group">
              <label>Roll No</label>
              <input id="rollNo" />
            </div>
          </div>

          <div class="form-group">
            <label>Location</label>
            <input id="studentLocation" placeholder="Hostel / Home" />
          </div>
        </div>

        <!-- EMPLOYEE -->
        <div id="empFields" style="display:none;">
          <div class="form-row">
            <div class="form-group">
              <label>Department</label>
              <input id="dept" />
            </div>

            <div class="form-group">
              <label>Designation</label>
              <input id="designation" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Employee ID</label>
              <input id="empId" />
            </div>

            <div class="form-group">
              <label>Office Location</label>
              <input id="empLocation" />
            </div>
          </div>
        </div>

        <hr />

        <!-- ASSET -->
        <div class="form-row">
          <div class="form-group">
            <label>Asset Description</label>
            <input id="assetDesc" required />
          </div>

          <div class="form-group">
            <label>Asset Type</label>
            <select id="asset_type">
              <option>Laptop</option>
              <option>Desktop</option>
              <option>Tablet</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Serial Number</label>
            <input id="assetId" required />
          </div>

          <div class="form-group">
            <label>Purchase Date</label>
            <input type="date" id="purchase_date" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Brand</label>
            <input id="brand" />
          </div>

          <div class="form-group">
            <label>Model</label>
            <input id="model" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>RAM</label>
            <input id="ram" />
          </div>

          <div class="form-group">
            <label>Processor</label>
            <input id="processor" />
          </div>
        </div>

        <!-- PLATFORM -->
        <div class="form-group">
          <label>Platform</label>
          <select id="platform" onchange="toggleMacField()">
            <option value="">Select</option>
            <option value="windows">Windows</option>
            <option value="apple">Apple</option>
          </select>
        </div>

        <div class="form-group" id="macField" style="display:none;">
          <label>MAC Address</label>
          <input id="macAddress" placeholder="AA:BB:CC:DD:EE:FF" />
        </div>

        <div class="form-group">
          <label>Storage</label>
          <input id="hdd" />
        </div>

        <div class="form-group">
          <label>Remarks</label>
          <textarea id="remarks"></textarea>
        </div>

        <button class="btn-submit" type="submit">Submit Entry</button>
      </form>
    </section>

    <!-- DOWNLOAD -->
    <section class="card cloud-action">
      <h2>Master Database</h2>

      <button class="btn-excel" onclick="downloadSpecific('student','2026')">üéì Batch 2026</button>
      <button class="btn-excel" onclick="downloadSpecific('student','2027')">üéì Batch 2027</button>
      <button class="btn-excel" onclick="downloadSpecific('employee','all')">üëî Employees</button>

      <h3 style="margin-top:2rem;">Recent Activity</h3>
      <div id="recentList"></div>
    </section>

  </div>
</div>

<!-- ================= DASHBOARD PAGE ================= -->
<div id="page-dashboard" class="page">

  <h2 class="page-title">Analytics Dashboard</h2>

  <!-- ‚úÖ DASHBOARD TOOLBAR -->
  <div class="dashboard-toolbar">
    <input
      id="searchInput"
      placeholder="üîç Search name / serial"
      oninput="applyFilters()"
    >

    <select id="filterRole" onchange="applyFilters()">
      <option value="all">All Roles</option>
      <option value="student">Student</option>
      <option value="employee">Employee</option>
    </select>

    <select id="filterBatch" onchange="applyFilters()">
      <option value="all">All Batches</option>
      <option value="2026">2026</option>
      <option value="2027">2027</option>
    </select>

    <button class="btn-excel" onclick="downloadExcel()">
      ‚¨á Download Excel
    </button>
  </div>


  <!-- SEARCH BAR -->
  <div class="dashboard-toolbar">
    <h3 style="margin-top:2rem;">üîç Search in website type the name / serial up üëÜ</h3>
    <select id="filterRole">
      <option value="all">All Roles</option>
      <option value="student">Student</option>
      <option value="employee">Employee</option>
    </select>
    <select id="filterBatch">
      <option value="all">All Batches</option>
      <option value="2026">2026</option>
      <option value="2027">2027</option>
    </select>
    <button class="btn-submit" onclick="applyFilters()">Apply</button>
  </div>

  <!-- STATS -->
  <div class="dashboard-stats">
    <div class="stat-card"><div id="statTotal">0</div>Total</div>
    <div class="stat-card"><div id="statStudents">0</div>Students</div>
    <div class="stat-card"><div id="statEmployees">0</div>Employees</div>
  </div>

  <!-- CHARTS -->
  <div class="charts-container">
    <div class="chart-box"><canvas id="roleChart"></canvas></div>
    <div class="chart-box"><canvas id="batchChart"></canvas></div>
  </div>

  <!-- TABLE -->
  <div class="card">
    <table class="data-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Role</th>
          <th>Asset</th>
          <th>Serial</th>
          <th>Platform</th>
          <th>MAC</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="dashTable"></tbody>
    </table>
  </div>

</div>

</main>

<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="script.js"></script>

</body>
</html>