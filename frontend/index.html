<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ITM University | Cloud Inventory System</title>

  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- ================= LOGIN MODAL ================= -->
<div id="loginModal">
  <div class="login-box">
    <img src="image/ISU-LOGO.webp"
         onerror="this.src='https://via.placeholder.com/80?text=ITM'"
         style="height:80px; margin-bottom:1rem; opacity:0.8;">
    <h2 style="color:var(--primary); margin-bottom:1rem;">ITM SYSTEM</h2>

    <form id="loginForm">
      <input type="text" id="username" placeholder="Username" required />
      <input type="password" id="password" placeholder="Password" required />
      <button class="btn-submit" type="submit">Login</button>
    </form>

    <p id="loginError" style="color:#ff3366; display:none; margin-top:10px;">
      Invalid Credentials
    </p>
  </div>
</div>

<!-- ================= HEADER ================= -->
<header>
  <div class="brand">
    <img src="image/ISU-LOGO.webp"
         onerror="this.src='https://via.placeholder.com/50?text=ITM'"
         style="height:50px;">
    <span>ITM Inventory</span>
  </div>

  <nav class="nav-tabs" id="navTabs" style="display:none;">
    <button class="nav-btn active" onclick="switchPage('entry')">Data Entry</button>
    <button class="nav-btn" onclick="switchPage('dashboard')">Dashboard</button>
    <button class="nav-btn" onclick="logout()">Logout</button>
  </nav>
</header>

<!-- ================= MAIN ================= -->
<main id="mainApp">

<!-- ================= DATA ENTRY PAGE ================= -->
<div id="page-entry" class="page active">
  <div class="entry-grid">

    <!-- FORM -->
    <section class="card">
      <h2>Add / Edit Entry</h2>

      <form id="assetForm">

        <!-- ROLE / TITLE -->
        <div class="form-row">
          <div class="form-group">
            <label>Role</label>
            <select id="role" onchange="toggleFields()" required>
              <option value="student">Student</option>
              <option value="employee">Employee</option>
            </select>
          </div>

          <div class="form-group">
            <label>Title</label>
            <select id="title">
              <option>Mr.</option>
              <option>Ms.</option>
              <option>Dr.</option>
              <option>Prof.</option>
            </select>
          </div>
        </div>

        <!-- NAME / EMAIL -->
        <div class="form-row">
          <div class="form-group">
            <label>Full Name</label>
            <input id="name" required />
          </div>

          <div class="form-group">
            <label>Email</label>
            <input id="email" type="email" />
          </div>
        </div>

        <!-- ENTITY -->
        <div class="form-group">
          <label>Entity</label>
          <select id="entity">
            <option value="">Select Entity</option>
            <option value="ITM Trust">ITM Trust</option>
            <option value="EduTech">EduTech</option>
          </select>
        </div>

        <!-- STUDENT -->
        <div id="studentFields">
          <div class="form-row">
            <div class="form-group">
              <label>Batch</label>
              <select id="batch">
                <option value="2027">2027</option>
                <option value="2026">2026</option>
                <option value="2025">2025</option>
              </select>
            </div>

            <div class="form-group">
              <label>Roll No</label>
              <input id="rollNo" />
            </div>
          </div>
        </div>

        <!-- EMPLOYEE -->
        <div id="empFields" style="display:none;">
          <div class="form-row">
            <div class="form-group">
              <label>Department</label>
              <input id="dept" />
            </div>

            <div class="form-group">
              <label>Designation</label>
              <input id="designation" />
            </div>
          </div>

          <div class="form-group">
            <label>Employee ID</label>
            <input id="empId" />
          </div>
        </div>

        <!-- ================= LOCATION ================= -->
        <h3 class="section-title">Location</h3>
        <div class="form-row">
          <div class="form-group">
            <label>Campus</label>
            <select id="campus">
              <option value="">Select Campus</option>
              <option>KHR.Campus</option>
              <option>CORP.Office</option>
              <option>RPR.Campus</option>
              <option>VAD.Campus</option>
              <option>VIZ.Campus</option>
              <option>SRS.Campus</option>
              <option>WAR.Campus</option>
              <option>Scrap.ITMGroup</option>
              <option>PanIndia.ISA.Offices</option>
              <option>Virtual.Hosting</option>
              <option>IDC.Hosting</option>
            </select>
          </div>

          <div class="form-group">
            <label>Area / Room</label>
            <select id="areaRoom">
              <option value="">Select Area / Room</option>
            </select>
          </div>
        </div>

        <hr />

        <!-- ================= ASSET DETAILS ================= -->
<div class="card">

  <h3 class="section-title">Asset Details</h3>

  <!-- Asset Description & Type -->
  <div class="form-row">
    <div class="form-group">
      <label>Asset Description</label>
      <input id="assetDesc" required placeholder="Office Laptop / Faculty Desktop etc." />
    </div>

    <div class="form-group">
      <label>Asset Type</label>
      <select id="asset_type">
        <option value="">Select Asset Type</option>
        <option>Laptop</option>
        <option>Mac Desktop</option>
        <option>MacBook Pro Laptop</option>
        <option>Monitor</option>
        <option>Printer</option>
        <option>Projector</option>
        <option>Rack Server</option>
      </select>
    </div>
  </div>

  <!-- Serial / Issue Date -->
  <div class="form-row">
    <div class="form-group">
      <label>Serial Number</label>
      <input id="assetId" required />
    </div>

    <div class="form-group">
      <label>Asset Issuing Date</label>
      <input type="date" id="purchase_date" />
    </div>
  </div>

  <!-- Asset Status -->
  <div class="form-row">
    <div class="form-group">
      <label>Asset Status</label>
      <select id="assetStatus">
        <option value="">Select Status</option>
        <option>In Use</option>
        <option>Stored</option>
        <option>Under Maintenance</option>
        <option>Issued Temporarily</option>
        <option>Scrapped</option>
        <option>Transferred</option>
      </select>
    </div>
  </div>

  <!-- Technical Specifications -->
  <h4 class="sub-title">Technical Specifications</h4>

  <div class="form-row">
    <div class="form-group">
      <label>Brand</label>
      <input id="brand" type="text" placeholder="Dell / HP / Apple" />
    </div>

    <div class="form-group">
      <label>Model</label>
      <input id="model" type="text" placeholder="Latitude / ThinkPad" />
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label>RAM</label>
      <input id="ram" type="text" placeholder="8 GB / 16 GB" />
    </div>

    <div class="form-group">
      <label>Processor</label>
      <input id="processor" type="text" placeholder="i5 / i7 / M1" />
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label>Storage</label>
      <input id="hdd" type="text" placeholder="256 GB SSD / 1 TB HDD" />
    </div>
  </div>

  <!-- Maintenance -->
  <div class="form-row">
    <div class="form-group full-width">
      <label>Maintenance Instructions</label>
      <textarea
        id="remarks"
        rows="3"
        placeholder="Cleaning schedule, service notes, battery care, restrictions etc."
      ></textarea>
    </div>
  </div>

</div>

        <!-- WARRANTY -->
        <h3 class="section-title">Warranty Details</h3>
        <div class="grid-2">
          <input type="number" id="warrantyMonths" placeholder="Warranty Months">
          <input type="number" id="warrantyPending" placeholder="Pending Months" readonly>
          <input type="text" id="warrantyInfo" placeholder="Warranty Info">
        </div>

        <!-- ACCOUNTING -->
        <h3 class="section-title">Accounting</h3>
        <div class="form-row">
          <input type="text" id="shopOrigin" placeholder="Shop / Origin">
          <input type="number" id="asset_price" placeholder="Purchase Price (â‚¹)">
        </div>

        <!-- VERIFICATION -->
        <h3 class="section-title">Manual Verification</h3>
        <div class="grid-2">
          <input type="email" id="verifiedBy" placeholder="Verified By Email">
          <input type="date" id="verificationDate">
        </div>

        <textarea id="remarks" placeholder="Remarks"></textarea>

        <button class="btn-submit" type="submit">Submit Entry</button>
      </form>
    </section>

    <!-- DOWNLOAD -->
    <section class="card cloud-action">
      <h2>Master Database</h2>

      <button class="btn-excel" onclick="downloadSpecific('student','2026')">ðŸŽ“ Batch 2026</button>
      <button class="btn-excel" onclick="downloadSpecific('student','2027')">ðŸŽ“ Batch 2027</button>
      <button class="btn-excel" onclick="downloadSpecific('employee','all')">ðŸ‘” Employees</button>

      <h3 style="margin-top:2rem;">Recent Activity</h3>
      <div id="recentList"></div>
    </section>

  </div>
</div>

<!-- ================= DASHBOARD PAGE ================= -->
<div id="page-dashboard" class="page">

  <h2 class="page-title">Analytics Dashboard</h2>

  <!-- âœ… DASHBOARD TOOLBAR -->
  <div class="dashboard-toolbar">
    <input
      id="searchInput"
      placeholder="ðŸ” Search name / serial"
      oninput="applyFilters()"
    >

    <select id="filterRole" onchange="applyFilters()">
      <option value="all">All Roles</option>
      <option value="student">Student</option>
      <option value="employee">Employee</option>
    </select>

    <select id="filterBatch" onchange="applyFilters()">
      <option value="all">All Batches</option>
      <option value="2026">2026</option>
      <option value="2027">2027</option>
    </select>

    <button class="btn-excel" onclick="downloadExcel()">
      â¬‡ Download Excel
    </button>
  </div>

  <!-- STATS -->
  <div class="dashboard-stats">
    <div class="stat-card"><div id="statTotal">0</div>Total</div>
    <div class="stat-card"><div id="statStudents">0</div>Students</div>
    <div class="stat-card"><div id="statEmployees">0</div>Employees</div>
  </div>

  <!-- CHARTS -->
  <div class="charts-container">
    <div class="chart-box"><canvas id="roleChart"></canvas></div>
    <div class="chart-box"><canvas id="batchChart"></canvas></div>
  </div>

  <!-- TABLE -->
<div class="card">
  <table class="data-table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Role</th>
        <th>Asset</th>
        <th>Serial</th>
        <th>Platform</th>
        <th>MAC</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="dashTable"></tbody>
  </table>
</div>

<!-- PAGINATION INFO -->
<div id="pageInfo" class="page-info"></div>

<!-- PAGINATION BUTTONS -->
<div id="pagination" class="pagination"></div>

</main>

<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="script.js"></script>

</body>
</html>