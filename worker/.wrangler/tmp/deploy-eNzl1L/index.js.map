{
  "version": 3,
  "sources": ["../../../src/index.js"],
  "sourceRoot": "C:\\it_inventory\\worker\\.wrangler\\tmp\\deploy-eNzl1L",
  "sourcesContent": ["export default {\n  async fetch(request, env) {\n    const url = new URL(request.url);\n\n    // CORS\n    const corsHeaders = {\n      \"Access-Control-Allow-Origin\": \"*\",\n      \"Access-Control-Allow-Methods\": \"GET, POST, OPTIONS\",\n      \"Access-Control-Allow-Headers\": \"Content-Type\",\n    };\n\n    if (request.method === \"OPTIONS\") {\n      return new Response(null, { headers: corsHeaders });\n    }\n\n    /* ---------------- HEALTH CHECK ---------------- */\n    if (url.pathname === \"/\" && request.method === \"GET\") {\n      return new Response(\n        JSON.stringify({\n          status: \"ITM Inventory API is running\",\n          time: new Date().toISOString(),\n        }),\n        { headers: { ...corsHeaders, \"Content-Type\": \"application/json\" } }\n      );\n    }\n\n    /* ---------------- ADD ASSET ---------------- */\n    if (url.pathname === \"/assets\" && request.method === \"POST\") {\n      const data = await request.json();\n\n      await env.DB.prepare(`\n        INSERT INTO assets (\n          role, title, name, email, batch, roll_no,\n          department, designation, emp_id, location,\n          asset_desc, asset_type, serial_no, purchase_date,\n          brand, model, ram, processor, storage, remarks\n        ) VALUES (\n          ?, ?, ?, ?, ?, ?,\n          ?, ?, ?, ?,\n          ?, ?, ?, ?,\n          ?, ?, ?, ?, ?, ?\n        )\n      `).bind(\n        data.role,\n        data.title,\n        data.name,\n        data.email,\n        data.batch,\n        data.roll_no,\n        data.department,\n        data.designation,\n        data.emp_id,\n        data.location,\n        data.asset_desc,\n        data.asset_type,\n        data.serial_no,\n        data.purchase_date,\n        data.brand,\n        data.model,\n        data.ram,\n        data.processor,\n        data.storage,\n        data.remarks\n      ).run();\n\n      return new Response(\n        JSON.stringify({ success: true }),\n        { headers: { ...corsHeaders, \"Content-Type\": \"application/json\" } }\n      );\n    }\n\n    /* ---------------- GET ALL ASSETS ---------------- */\n    if (url.pathname === \"/assets\" && request.method === \"GET\") {\n      const { results } = await env.DB.prepare(\n        \"SELECT * FROM assets ORDER BY created_at DESC\"\n      ).all();\n\n      return new Response(\n        JSON.stringify(results),\n        { headers: { ...corsHeaders, \"Content-Type\": \"application/json\" } }\n      );\n    }\n\n    /* ---------------- 404 ---------------- */\n    return new Response(\n      JSON.stringify({ error: \"Route not found\" }),\n      { status: 404, headers: corsHeaders }\n    );\n  },\n};\n"],
  "mappings": ";AAAA,IAAO,gBAAQ;AAAA,EACb,MAAM,MAAM,SAAS,KAAK;AACxB,UAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAG/B,UAAM,cAAc;AAAA,MAClB,+BAA+B;AAAA,MAC/B,gCAAgC;AAAA,MAChC,gCAAgC;AAAA,IAClC;AAEA,QAAI,QAAQ,WAAW,WAAW;AAChC,aAAO,IAAI,SAAS,MAAM,EAAE,SAAS,YAAY,CAAC;AAAA,IACpD;AAGA,QAAI,IAAI,aAAa,OAAO,QAAQ,WAAW,OAAO;AACpD,aAAO,IAAI;AAAA,QACT,KAAK,UAAU;AAAA,UACb,QAAQ;AAAA,UACR,OAAM,oBAAI,KAAK,GAAE,YAAY;AAAA,QAC/B,CAAC;AAAA,QACD,EAAE,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB,EAAE;AAAA,MACpE;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,aAAa,QAAQ,WAAW,QAAQ;AAC3D,YAAM,OAAO,MAAM,QAAQ,KAAK;AAEhC,YAAM,IAAI,GAAG,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAYpB,EAAE;AAAA,QACD,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,MACP,EAAE,IAAI;AAEN,aAAO,IAAI;AAAA,QACT,KAAK,UAAU,EAAE,SAAS,KAAK,CAAC;AAAA,QAChC,EAAE,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB,EAAE;AAAA,MACpE;AAAA,IACF;AAGA,QAAI,IAAI,aAAa,aAAa,QAAQ,WAAW,OAAO;AAC1D,YAAM,EAAE,QAAQ,IAAI,MAAM,IAAI,GAAG;AAAA,QAC/B;AAAA,MACF,EAAE,IAAI;AAEN,aAAO,IAAI;AAAA,QACT,KAAK,UAAU,OAAO;AAAA,QACtB,EAAE,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB,EAAE;AAAA,MACpE;AAAA,IACF;AAGA,WAAO,IAAI;AAAA,MACT,KAAK,UAAU,EAAE,OAAO,kBAAkB,CAAC;AAAA,MAC3C,EAAE,QAAQ,KAAK,SAAS,YAAY;AAAA,IACtC;AAAA,EACF;AACF;",
  "names": []
}
